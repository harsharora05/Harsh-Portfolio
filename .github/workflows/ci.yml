name: CI Pipeline

on:
  pull_request:
    branches:
      - production

jobs:
    validating-code:
        runs-on: ubuntu-latest
        steps: 
            - name : cloning repo
              uses: actions/checkout@v5
            - name: Use Node.js
              uses: actions/setup-node@v4
              with:
                node-version: '20'
            - name: Install dependencies
              run : npm ci
            - name : Lint checking
              run : npm run lint  
            -  name: Scan for vulnerabilities with Trivy
               uses: aquasecurity/trivy-action@master
               with:
                scan-type: 'fs'
                ignore-unfixed: true
                format: 'table'
                severity: 'HIGH,CRITICAL'
            - name : Building App
              run : npm run build